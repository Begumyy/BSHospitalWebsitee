<h1>Randevular</h1>

<div class="row">
    <div class="col-lg-12 ">
        <div class="card border border-primary">
            <div class="card-header bg-primary border-primary">
                <h5 class="my-0 text-white"><i class="uil uil-message me-3"></i>Randevular</h5>
            </div><!-- end card-header -->
            <div class="card-body">
                <table id="tblRandevular" class="table table-striped table-bordered">
                </table>
            </div><!-- end card-body -->
        </div><!-- end card -->
    </div>
</div>

@section Scripts{
    <script type="text/javascript">

        $(document).ready(function () {
            randevularListele();
        });

        function randevularListele() {
            if ($.fn.DataTable.isDataTable('#tblRandevular')) {
                $('#tblOnaylananlar').DataTable().destroy();
            }
            var DataTable = $("#tblRandevular").DataTable({
                ajax: { url: '/Admin/Appointment/GetAll', dataSrc: '' },
                columns: [
                    { data: 'id', title: 'ID' },
                    { data: 'hospital.hospitalId', title: 'Hastane Id' },
                    { data: 'department.departmentId', title: 'Bölüm Id' },
                    { data: 'doctor.doctorId', title: 'Doktor Id' },
                    { data: 'patient.patientId', title: 'Patient Id' },
                    

                    {
                        data: "id",
                        render: function (data, type, row) {
                            return `<a href="#" onclick="Delete(${data})" class="btn btn-sm btn-danger">Sil</a> <a onclick="Update('${data}','${row.department.departmantName}','${row.hospital.hospitalName}','${row.doctor.doctorName}','${row.patient.patientName}','${row.patient.tckn}','${row.patient.phone}','${row.patient.address}','${row.patient.age}')" class="btn btn-sm btn-primary">Güncelle</a>`;
                        }

                    },

                    {
                        data: "id",
                        render: function (data, type, row) {
                            if (row.IsAccepted) {
                                return `<span class="text-success">Onaylandı</span>`;
                            } else {
                                return '';
                            }
                        }
                    },
                ],
                order: [[9, 'asc']],
            });
        }

    </script>
}